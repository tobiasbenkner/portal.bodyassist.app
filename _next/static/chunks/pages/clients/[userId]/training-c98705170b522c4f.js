(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[726],{1819:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients/[userId]/training",function(){return t(1761)}])},2345:function(n,e,t){"use strict";var r=t(4776),i=t.n(r),a=t(2322),o=t(3927),u=t(7550),l=t(2725),c=t(2197),s=t(6961),f=t(422),d=t(5873),p=t(4117),v=t(2056),h=t(2784),y=t(5632);function m(n,e,t,r,i,a,o){try{var u=n[a](o),l=u.value}catch(c){return void t(c)}u.done?e(l):Promise.resolve(l).then(r,i)}e.Z=function(n){var e=(0,y.useRouter)(),t=e.query.userId,r=e.pathname,b=(0,h.useState)(""),x=b[0],g=b[1],j=[{name:"Entrenamiento",link:"/clients/".concat(t,"/training"),section:"training"},{name:"Contacto",link:"/clients/".concat(t,"/contact"),section:"contact"}];(0,h.useEffect)((function(){g(r.split("/")[3])}),[r]);var w=function(){var n,t=(n=i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.replace(t);case 2:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){m(a,r,i,o,u,"next",n)}function u(n){m(a,r,i,o,u,"throw",n)}o(void 0)}))});return function(n){return t.apply(this,arguments)}}();return(0,a.jsxs)(o.Z,{direction:"row",spacing:{xs:1,sm:2,md:4},children:[(0,a.jsxs)(u.Z,{sx:{backgroundColor:"#DCDCDC",padding:2,borderRadius:1},children:[(0,a.jsx)(o.Z,{sx:{mb:2},justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{sx:{height:80,width:80},alt:n.client.name,src:n.client.photo})}),(0,a.jsx)(c.Z,{sx:{textAlign:"center",fontWeight:"bold",mb:2},children:n.client.name}),(0,a.jsx)(s.Z,{}),(0,a.jsx)(f.Z,{children:j.map((function(n){return(0,a.jsx)(d.ZP,{disablePadding:!0,children:(0,a.jsx)(p.Z,{selected:x===n.section,onClick:function(){return w(n.link)},children:(0,a.jsx)(v.Z,{primary:n.name})})},n.link)}))})]}),(0,a.jsx)(u.Z,{sx:{width:"100%"},children:n.children})]})}},1761:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return tn}});var r=t(4776),i=t.n(r),a=t(2322),o=t(2345),u=t(7072),l=t(3698),c=t(2784),s=t(5632),f=t(2048),d=t(8963),p=t(7550),v=t(2197),h=t(2841),y=t(9506),m=t(7527),b=t(8903),x=t(4380),g=t(3927),j=t(558),w=t(3842),P=t(5287);function Z(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function O(n,e,t,r,i,a,o){try{var u=n[a](o),l=u.value}catch(c){return void t(c)}u.done?e(l):Promise.resolve(l).then(r,i)}function S(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){O(a,r,i,o,u,"next",n)}function u(n){O(a,r,i,o,u,"throw",n)}o(void 0)}))}}function I(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,a=[],o=!0,u=!1;try{for(t=t.call(n);!(o=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(l){u=!0,i=l}finally{try{o||null==t.return||t.return()}finally{if(u)throw i}}return a}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return Z(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function k(){var n=C(["\nquery listAllTrainingPlanTemplate {\n    listAllTrainingPlanTemplate {\n        _id\n        name\n    }\n}"]);return k=function(){return n},n}function _(){var n=C(["\n    query Query($input: FindByIdInput!) {\n        findTrainingPlanTemplateById(input: $input) {\n            _id\n            name\n            days {\n                name\n                exercises {\n                    exercise {\n                        _id\n                    }\n                    sets\n                    reps\n                }\n            }\n        }\n    }\n"]);return _=function(){return n},n}var T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},A=(0,j.Ps)(k()),E=(0,j.Ps)(_()),D=function(n){var e,t=n.setPlan,r=I((0,w.t)(A),2),o=r[0],u=r[1],l=I((0,w.t)(E),2),s=l[0],j=l[1],Z=(0,c.useState)(!1),O=Z[0],C=Z[1],k=(0,c.useState)(""),_=k[0],D=k[1],N=function(){var n=S(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(C(!0),u.data){n.next=4;break}return n.next=4,o();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),B=function(){C(!1),D("")},$=function(){var n=S(i().mark((function n(){var e,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s({variables:{input:{id:_}}});case 2:e=n.sent,r=(0,P.f)(e.data.findTrainingPlanTemplateById),t(r),B();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{onClick:N,variant:"outlined",children:"Carga Plan"}),(0,a.jsx)(d.Z,{open:O,onClose:B,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(p.Z,{sx:T,children:[(0,a.jsx)(v.Z,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{mb:2},children:"Elige un plan"}),u.loading?(0,a.jsx)(h.Z,{}):(0,a.jsxs)(y.Z,{fullWidth:!0,sx:{mb:2},children:[(0,a.jsx)(m.Z,{children:"Plans"}),(0,a.jsx)(b.Z,{value:_,label:"Plans",onChange:function(n){return e=n.target.value,void D(e);var e},children:null===(e=u.data)||void 0===e?void 0:e.listAllTrainingPlanTemplate.map((function(n){return(0,a.jsx)(x.Z,{value:n._id,children:n.name},"plan-".concat(n._id))}))})]}),(0,a.jsxs)(g.Z,{direction:"row",spacing:2,justifyContent:"end",children:[(0,a.jsx)(f.Z,{onClick:B,disabled:u.loading||j.loading,children:"cancelar"}),(0,a.jsx)(f.Z,{variant:"contained",onClick:$,disabled:u.loading||j.loading,children:"carga"})]})]})})]})},N=t(794),B=t(3379),$=t(6890),F=t(107),M=t(6765),q=t.n(M),z=t(5567),U=t(6537);function W(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var R=function(n){return null===n||(e=n,(null!=(t=Date)&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t)&&!isNaN(n.getTime())&&n.getFullYear()>1970);var e,t},J=function(n){var e=n.label,t=n.field,r=n.value,i=n.setter,o=(0,c.useState)(!1),u=o[0],l=o[1],s=function(n){var e=R(n);l(!e),i((function(r){var i=JSON.parse(JSON.stringify(r));return q()(i,t,e?function(n){if(null===n)return null;var e=n.getTimezoneOffset();return new Date(n.getTime()-60*e*1e3).toISOString().split("T")[0]}(n):null),i}))};return(0,a.jsx)(y.Z,{fullWidth:!0,variant:"outlined",children:(0,a.jsx)(z.M,{label:e,value:r,inputFormat:"dd/MM/yyyy",onChange:function(n){s(n)},renderInput:function(n){return(0,a.jsx)(U.Z,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){W(n,e,t[e])}))}return n}({},n,{error:u}))}})})};function X(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Q(n,e,t,r,i,a,o){try{var u=n[a](o),l=u.value}catch(c){return void t(c)}u.done?e(l):Promise.resolve(l).then(r,i)}function Y(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){Y(n,e,t[e])}))}return n}function H(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,a=[],o=!0,u=!1;try{for(t=t.call(n);!(o=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(l){u=!0,i=l}finally{try{o||null==t.return||t.return()}finally{if(u)throw i}}return a}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return X(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function L(){var n=K(["\n    query FindClientById($input: FindUserByIdInput!) {\n        findClientById(input: $input) {\n            _id\n            name\n            email\n            trainingplan {\n                _id\n                name\n                expirationDate\n                days {\n                    name\n                    exercises {\n                        exercise {\n                            _id\n                        }\n                        reps\n                        sets\n                    }\n                }\n            }\n        }\n    }\n"]);return L=function(){return n},n}function V(){var n=K(["\nmutation Mutation($input: TrainingPlanInput!) {\n    upsertTrainingplanWithUser(input: $input) {\n        _id\n        name\n        userId\n    }\n}"]);return V=function(){return n},n}var nn=(0,j.Ps)(L()),en=(0,j.Ps)(V()),tn=function(){var n=(0,s.useRouter)().query.userId,e=(0,c.useState)(),t=e[0],r=e[1],d=(0,N.a)(nn,{variables:{input:{id:n}}}),p=d.loading,v=d.error,h=d.data,y=(d.refetch,H((0,B.D)(en),2)),m=y[0],b=y[1];if((0,c.useEffect)((function(){if(!p){var n=h.findClientById.trainingplan;r(n?(0,P.f)(n):{name:"",days:[],expirationDate:void 0})}}),[p]),p)return(0,a.jsx)($.Z,{});var x=function(){var e,r=(e=i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=G({},t,{userId:n}),e.next=3,m({variables:{input:G({},r)}});case 3:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(n){Q(a,r,i,o,u,"next",n)}function u(n){Q(a,r,i,o,u,"throw",n)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,a.jsxs)(o.Z,{client:h.findClientById,children:[(0,a.jsxs)(u.Z,{title:"Entrenamiento",children:[(0,a.jsx)(D,{setPlan:r}),(0,a.jsx)(f.Z,{variant:"contained",onClick:x,disabled:p||b.loading,children:"Save"})]}),(0,a.jsxs)(g.Z,{spacing:2,children:[v&&(0,a.jsx)(F.Z,{severity:"warning",children:v.message}),b.error&&(0,a.jsx)(F.Z,{severity:"warning",sx:{mb:2},children:b.error.message}),(0,a.jsx)(J,{field:"expirationDate",setter:r,label:"Fecha de vencimiento",value:(null===t||void 0===t?void 0:t.expirationDate)||null}),(0,a.jsx)(l.Z,{state:t,setState:r})]})]})}}},function(n){n.O(0,[182,134,647,415,870,701,856,13,47,774,888,179],(function(){return e=1819,n(n.s=e);var e}));var e=n.O();_N_E=e}]);